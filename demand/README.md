# MATSim population for Melbourne

This script generates a sample population for Melbourne based on the [ABS 2016 census](https://www.abs.gov.au/websitedbs/censushome.nsf/home/2016) and using [VISTA-like](https://transport.vic.gov.au/about/data-and-research/vista) activities and trips.

## Setup

### R
The population generation code (in `*.R` files) is written in [R](https://www.r-project.org) and a working knowledge of R is assumed here. You may have to install some missing R packages for instance.

### Data

To get started, you must first download the required data files for generating the population. This can be done conveniently, using the provided Bash script, as follows (see [./data/README.md](./data/README.md) for details):
```
cd ./data && ./prepare.sh
```

If running a Bash script is not an option for you, then you may have to download the data files manually (look in the bash file for the URLs it is accessing).

## How to build a sample Melbourne population

Here is an example of how to build a small sample population (0.1%) for Melbourne with census-like persons and VISTA-like activities and trips (for weekdays):

```
Rscript --vanilla -e 'source("makeExamplePopulation.R");
2020-03-19 14:14:06 | Loading locations database
2020-03-19 14:14:17 | Loading ABS census-like persons from output/2.sample/sample.csv.gz
2020-03-19 14:14:17 | Loading VISTA-like plans from output/3.plan/plan.csv
2020-03-19 14:14:17 | Loading matched plans to persons from output/4.match/match.csv.gz
2020-03-19 14:14:17 | Assigning home SA1 locations
2020-03-19 14:14:19 | Assigning activities' SA1s and travel modes (can take a while)
2020-03-19 14:14:19 | ..........|..........|..........|..........|..........|..........|..........|..........|....x.....|..........| 100
2020-03-19 14:14:24 | ..........|..........|..........|..........|....x.....|..........|..........|..........|..........|..........| 200
2020-03-19 14:14:29 | ..........|.........x|..........|..........|......x...|..........|..........|..........|..........|..........| 300
2020-03-19 14:14:33 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 400
2020-03-19 14:14:37 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 500
2020-03-19 14:14:41 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 600
2020-03-19 14:14:46 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 700
2020-03-19 14:14:50 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 800
2020-03-19 14:14:54 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 900
2020-03-19 14:14:59 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1000
2020-03-19 14:15:03 | ..........|..........|..........|..........|..........|x.........|..........|..........|..........|..........| 1100
2020-03-19 14:15:07 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1200
2020-03-19 14:15:11 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1300
2020-03-19 14:15:16 | ..x.......|..........|..........|..........|..........|..........|..........|.x....x...|..x.......|..........| 1400
2020-03-19 14:15:20 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1500
2020-03-19 14:15:24 | ..........|..........|..........|.......x..|..........|..........|..........|..........|..........|..........| 1600
2020-03-19 14:15:28 | ..........|..........|..........|.x........|..........|..........|..........|..........|..........|..........| 1700
2020-03-19 14:15:33 | ..........|..........|..........|..........|.........x|x.x.......|.........x|..........|..........|..........| 1800
2020-03-19 14:15:37 | ..........|..........|..........|..........|..........|..........|..........|.......x.x|..........|..........| 1900
2020-03-19 14:15:41 | ..........|..........|..........|..........|..........|..........|..........|..x.......|..........|..........| 2000
2020-03-19 14:15:45 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2100
2020-03-19 14:15:50 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2200
2020-03-19 14:15:54 | .....x....|..........|..........|..........|..........|x.........|..........|..........|..........|..........| 2300
2020-03-19 14:15:58 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|...x..x...| 2400
2020-03-19 14:16:02 | ..........|..........|..........|..........|..........|..........|..........|......x...|..........|......x...| 2500
2020-03-19 14:16:07 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2600
2020-03-19 14:16:11 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2700
2020-03-19 14:16:16 | ..........|..........|..........|..........|.........x|..........|..........|..........|..........|..........| 2800
2020-03-19 14:16:20 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2900
2020-03-19 14:16:25 | ..........|..........|..........|..........|......x.xx|..........|..........|..........|..........|.x........| 3000
2020-03-19 14:16:29 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3100
2020-03-19 14:16:34 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3200
2020-03-19 14:16:38 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|...x......| 3300
2020-03-19 14:16:43 | ..........|..........|..........|..........|..........|..........|........x.|..........|..........|..........| 3400
2020-03-19 14:16:47 | .x........|..x.......|..........|..........|..........|..........|..........|..........|..........|..........| 3500
2020-03-19 14:16:52 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3600
2020-03-19 14:16:57 | ..........|......x...|.....x....|..........|.......x..|.x........|..x.......|..........|..........|..........| 3700
2020-03-19 14:17:01 | ..........|..........|..........|..........|..........|..........|......x...|..........|..........|....x.....| 3800
2020-03-19 14:17:06 | ..........|..........|..........|..........|..........|..........|......x...|..........|..........|..........| 3900
2020-03-19 14:17:10 | ..........|..........|..........|..........|..........|..........|..........|..........|.........x|..........| 4000
2020-03-19 14:17:15 | ..........|..........|..........|..........|..........|..........|..........|..........|.......x..|..........| 4100
2020-03-19 14:17:20 | ..........|..........|..........|..........|..........|..........|..........|...
2020-03-19 14:17:23 | Wrote 4130 plans to output/5.locate/plan.csv
2020-03-19 14:17:23 | Wrote 43 discarded persons to output/5.locate/persons.discarded.csv
2020-03-19 14:17:23 | Loading locations database
2020-03-19 14:17:32 | Loading VISTA-like plans from output/5.locate/plan.csv
2020-03-19 14:17:32 | Assigning coordinates to activities in SA1s (can take a while)
2020-03-19 14:17:33 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 100
2020-03-19 14:17:35 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 200
2020-03-19 14:17:38 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 300
2020-03-19 14:17:40 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 400
2020-03-19 14:17:43 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 500
2020-03-19 14:17:45 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 600
2020-03-19 14:17:47 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 700
2020-03-19 14:17:49 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 800
2020-03-19 14:17:52 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 900
2020-03-19 14:17:54 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1000
2020-03-19 14:17:56 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1100
2020-03-19 14:17:58 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1200
2020-03-19 14:18:01 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1300
2020-03-19 14:18:03 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1400
2020-03-19 14:18:05 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1500
2020-03-19 14:18:08 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1600
2020-03-19 14:18:10 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1700
2020-03-19 14:18:12 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1800
2020-03-19 14:18:14 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1900
2020-03-19 14:18:16 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2000
2020-03-19 14:18:19 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2100
2020-03-19 14:18:21 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2200
2020-03-19 14:18:23 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2300
2020-03-19 14:18:25 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2400
2020-03-19 14:18:28 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2500
2020-03-19 14:18:30 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2600
2020-03-19 14:18:32 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2700
2020-03-19 14:18:35 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2800
2020-03-19 14:18:37 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2900
2020-03-19 14:18:39 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3000
2020-03-19 14:18:41 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3100
2020-03-19 14:18:44 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3200
2020-03-19 14:18:46 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3300
2020-03-19 14:18:48 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3400
2020-03-19 14:18:51 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3500
2020-03-19 14:18:53 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3600
2020-03-19 14:18:56 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3700
2020-03-19 14:18:58 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3800
2020-03-19 14:19:00 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3900
2020-03-19 14:19:02 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4000
2020-03-19 14:19:05 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4100
2020-03-19 14:19:07 | ..........|..........|..........|..........|..........|..........|..........|...
2020-03-19 14:19:09 | Wrote 4173 plans to output/6.place/plan.csv
2020-03-19 14:19:09 | Loading VISTA-like plans from output/6.place/plan.csv
2020-03-19 14:19:09 | Assigning start/end times to activities  (can take a while)
2020-03-19 14:19:09 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 100
2020-03-19 14:19:11 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 200
2020-03-19 14:19:12 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 300
2020-03-19 14:19:14 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 400
2020-03-19 14:19:15 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 500
2020-03-19 14:19:16 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 600
2020-03-19 14:19:18 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 700
2020-03-19 14:19:20 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 800
2020-03-19 14:19:21 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 900
2020-03-19 14:19:23 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1000
2020-03-19 14:19:24 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1100
2020-03-19 14:19:26 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1200
2020-03-19 14:19:27 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1300
2020-03-19 14:19:29 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1400
2020-03-19 14:19:30 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1500
2020-03-19 14:19:32 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1600
2020-03-19 14:19:33 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1700
2020-03-19 14:19:35 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1800
2020-03-19 14:19:36 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1900
2020-03-19 14:19:38 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2000
2020-03-19 14:19:39 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2100
2020-03-19 14:19:41 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2200
2020-03-19 14:19:42 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2300
2020-03-19 14:19:44 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2400
2020-03-19 14:19:46 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2500
2020-03-19 14:19:47 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2600
2020-03-19 14:19:49 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2700
2020-03-19 14:19:50 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2800
2020-03-19 14:19:51 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2900
2020-03-19 14:19:53 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3000
2020-03-19 14:19:54 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3100
2020-03-19 14:19:56 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3200
2020-03-19 14:19:58 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3300
2020-03-19 14:19:59 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3400
2020-03-19 14:20:01 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3500
2020-03-19 14:20:02 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3600
2020-03-19 14:20:04 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3700
2020-03-19 14:20:05 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3800
2020-03-19 14:20:07 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3900
2020-03-19 14:20:08 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4000
2020-03-19 14:20:10 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4100
2020-03-19 14:20:12 | ..........|..........|..........|..........|..........|..........|..........|...
2020-03-19 14:20:13 | Wrote 4173 plans to output/7.time/plan.csv
2020-03-19 14:20:13 | Loading VISTA-like plans from output/7.time/plan.csv
2020-03-19 14:20:13 | Writing as MATSim XML (can take a while)
2020-03-19 14:20:13 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 100
2020-03-19 14:20:14 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 200
2020-03-19 14:20:14 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 300
2020-03-19 14:20:15 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 400
2020-03-19 14:20:16 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 500
2020-03-19 14:20:17 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 600
2020-03-19 14:20:18 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 700
2020-03-19 14:20:18 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 800
2020-03-19 14:20:19 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 900
2020-03-19 14:20:20 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1000
2020-03-19 14:20:21 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1100
2020-03-19 14:20:21 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1200
2020-03-19 14:20:22 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1300
2020-03-19 14:20:23 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1400
2020-03-19 14:20:24 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1500
2020-03-19 14:20:24 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1600
2020-03-19 14:20:25 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1700
2020-03-19 14:20:26 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1800
2020-03-19 14:20:27 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 1900
2020-03-19 14:20:28 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2000
2020-03-19 14:20:28 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2100
2020-03-19 14:20:29 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2200
2020-03-19 14:20:30 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2300
2020-03-19 14:20:31 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2400
2020-03-19 14:20:32 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2500
2020-03-19 14:20:32 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2600
2020-03-19 14:20:33 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2700
2020-03-19 14:20:34 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2800
2020-03-19 14:20:35 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 2900
2020-03-19 14:20:36 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3000
2020-03-19 14:20:36 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3100
2020-03-19 14:20:37 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3200
2020-03-19 14:20:38 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3300
2020-03-19 14:20:39 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3400
2020-03-19 14:20:39 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3500
2020-03-19 14:20:40 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3600
2020-03-19 14:20:41 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3700
2020-03-19 14:20:42 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3800
2020-03-19 14:20:43 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 3900
2020-03-19 14:20:43 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4000
2020-03-19 14:20:44 | ..........|..........|..........|..........|..........|..........|..........|..........|..........|..........| 4100
2020-03-19 14:20:45 | ..........|..........|..........|..........|..........|..........|..........|...
2020-03-19 14:20:46 | Wrote 4173 plans to output/plan.xml

```
